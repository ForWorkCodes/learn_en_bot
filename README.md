# Learn EN Bot — Skeleton

Телеграм-бот для ежедневных уроков с фразовыми глаголами:
- Aiogram (бот, хэндлеры)
- SQLite/SQLAlchemy (пользователи и задания)
- Google Gemini (подбор глагола и оценка ответов)
- APScheduler (ежедневные задания и напоминания)

## Быстрый старт

1) Скопируйте `.env.example` в `.env` и заполните:
   - `TELEGRAM_BOT_TOKEN`
   - `GEMINI_API_KEY`
   - при необходимости: `DATABASE_URL`, `SCHEDULE_CRON`, `TZ`
   - настройки синтеза речи: `GEMINI_TTS_MODEL`, `GEMINI_TTS_VOICE`, `GEMINI_TTS_MIME_TYPE`
2) Установите зависимости:
   - `python -m venv .venv`
   - `.venv\\\\Scripts\\\\activate` (Windows)
   - `pip install -r requirements.txt`
3) Запуск: `python -m app.main`

## Логика
- Раз в день бот создаёт персональное задание: фразовый глагол с переводом, объяснением и примерами.
- В течение дня бот шлёт 2 напоминания и просит составить предложения.
- Любое сообщение пользователя в этот день оценивается через Gemini на корректность использования глагола.
- Если ответ достаточно хороший (оценка ≥ 4/5), задание помечается выполненным.

## Файлы
- `app/main.py` — запуск бота и планировщика
- `app/config.py` — конфиг из `.env`
- `app/models.py` — `User`, `Assignment`
- `app/db.py` — инициализация БД и helper-функции
- `app/gemini.py` — генерация задания и оценка ответа
- `app/handlers/start.py` — `/start`
- `app/handlers/chat.py` — обработка сообщений и оценка прогресса
- `app/scheduler.py` — ежедневное создание задания и напоминания

## Заметки
- По умолчанию используется SQLite файл `learn_en.db` в корне.
- Для Gemini обязателен `GEMINI_API_KEY`.
- Расписание задаётся `SCHEDULE_CRON` (формат cron), таймзона — `TZ`.
- синтез речи выполняется только моделью Gemini; других движков в приложении нет.
